# 流程控制

## 什么是流程控制
在我们读文章时，我们都知道应该自上向下阅读（少数语言会从右向左）。编程语言也是如此，自上向下被执行。

比如如下代码：
```cpp
std::cout<< 1 << std::endl;             // 输出 1 
std::cout<< 100 << std::endl;           // 输出 100
std::cout<< "Hello world" << std::endl; // 输出 Hello world
```
上例中的代码，会依次在命令行输出3行内容，分别为
```cpp
1
100
Hello world
```
既然我们知道cpp代码的流程，也就是执行顺序，是自上向下，那为什么还要讨论流程控制呢？

有两种情况需要流程控制：

第一种，代码中有大量重复计算，需要重复执行某些代码。

第二种，代码中有分支跳转，需要选择性执行或不执行某些代码。

## 循环

先来讨论第一种情况，假设我们现在要计算`1+2+3+...+10`的结果。你会怎么做呢？你可能会说，简单这样就可以了：
``` cpp
int a = 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10;
std::cout << a << std::endl;
```
这样固然是对的，但是一来太费键盘，二来，如果不是`1~10`,而是`1~100`，甚至`1~10000000`呢？

你可能会说，哎等差数列不是有公式嘛，我可以直接算 `(1 + n) * n / 2`就可以了。 

那……如果是让你计算`1~100000`之内所有素数的和呢？这回没有公式可以算了吧？

那么，如果我们能够把加和的部分抽离出来，重复利用，是不是就能解决“代码重复”这个问题呢？

在cpp中，想实现一个循环，我们有两种选择，`for-loop` 和`while-loop`。

### for-loop
`for-loop`的结构很简单，是
```cpp
for(<state_1>; <state_2>; <state_3>){
    // loop_body
}
```
其中，`<state_1>`会在执行`for-loop`之处执行一次，通常我们用来初始化某些变量；`<state_2>`必须为判断语句，会在每次循环执行前进行判断，如果结果为`true`，则继续循环，如果为`false`则退出循环；`<state_3>`则是对循环变量进行控制。

三个语句执行的顺序是：
第一次开始循环前：执行`<state_1>`初始化变量。
然后在每次循环开始前
- 执行`<state_2>`检查是否满足循环条件，
    - 若满足，则执行`<state_3>`更新循环变量
    - 若不满足，则结束循环

比如：

```cpp
int result = 0;                     // 初始化result变量
for (int i = 0; i <= 100; ++i){     // 开始循环
    result = result + i;            // result 每次加 i
}
```
在上例中，我们初始化了变量`result`, 然后用一个`for-loop`来计算从`0`（因为i被初始化为`0`）到`100`（因为循环继续的条件为 `i <=100`, 也即 `i=101`时结束循环）的和。

### while-loop
与`for-loop`很类似，`while-loop` 也可以用来做循环控制。但是相对简单一些，语句为
```cpp
while(<state>){
    // loop body
}
// 或者
do {
    // loop body
}while(<state>)
```
其中，每次进入循环前，都会检查`<state>`的值是否为`true`.若不是，则跳出循环。`do...while`的形式，则是一定执行一次`loop body`然后和普通的`while-loop`一样检查`<state>`，执行或跳出循环。

如果用`while-loop` 来计算 `0~100`的和，可以：
```cpp
// while-loop
int result = 0; 
int i = 0; 
while(i <= 100){
    result = result + i;
}
// do-while
i = 0; 
result = 0;
do{
    result = result + i;
}while (i <= 100)
```

## 条件
讲完了第一种情况，我们来说说第二种情况。接着来讲讲条件。举另外一个例子，假如我们要计算`1~100`里所有奇数的和。我们已经知道了循环，那么代码可以是这样：

```cpp
int result = 0;
for (int i = 0; i <= 100; ++i){
    _____请填空____
}
```
在请填空处，我们如何只让`result`与奇数的`i`相加，而不管偶数的`i`呢？
